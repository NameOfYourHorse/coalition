(this.webpackJsonpcoalition=this.webpackJsonpcoalition||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n.n(r),a=n(36),u=n.n(a),i=n(23),s=(n(42),n(13)),o=n(0),j=n.n(o),b=n(1),f=n(8),l=n(16),p=n(17),d=n(12),O=n(18),x={getAuth:O.b,collection:d.b,doc:d.d,getDoc:d.e,getFirestore:d.g,setDoc:d.j,deleteDoc:d.c},v=function(e){var t=function(){return x.getAuth().currentUser},n=function(t){var n=x.getFirestore();return x.doc(n,e,t)},r=function(){var t=x.getFirestore();return x.collection(t,e)},c=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(t),e.next=3,x.getDoc(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(b.a)(j.a.mark((function e(n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(l.a)({createdBy:t().uid,createdDate:new Date},n),e.next=3,Object(d.a)(r(),c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setDoc(n(t),r);case 2:return e.next=4,c(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.deleteDoc(n(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(r(),Object(d.k)("coalitionId","==",t)),e.next=3,Object(d.f)(n);case 3:return c=e.sent,e.abrupt("return",c.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getCurrentUser:t,createDoc:a,getDocRef:n,getCollection:r,getById:c,set:u,deleteDocument:i,getByCoalitionId:s,getByCoalitionIdSub:function(e,t){var n=Object(d.i)(r(),Object(d.k)("coalitionId","==",e));return Object(d.h)(n,(function(e){t(e.docs)}))}}},h=function(){var e=window.location.origin;return"https://eyarham.github.io"===e?e+"/coalition":e},m=v("rules"),w=m.getByCoalitionId,y=(m.getByCoalitionIdQuery,m.createDoc),k=m.set,g=m.getByCoalitionIdSub,C=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:if(r=e.sent,1!==(c=r.filter((function(e){return e.data().name===n}))).length){e.next=6;break}return e.abrupt("return",c[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={coalitionId:t,name:n,value:r},e.next=3,y(c);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,n);case 2:return c=e.sent,a=Object(l.a)(Object(l.a)({},c.data()),{},{value:r}),e.next=6,k(c.id,a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,n);case 2:if(!(c=e.sent)){e.next=5;break}return e.abrupt("return",c.data().value===r);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),D=v("memberships"),N=D.getCurrentUser,E=D.getDocRef,R=D.getCollection,P=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={coalitionId:t,memberId:n},e.next=3,Object(d.a)(R(),r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.i)(R(),Object(d.k)("memberId","==",N().uid)),e.next=3,Object(d.f)(t);case 3:return n=e.sent,r=[],n.forEach((function(e){r.push(e.data().coalitionId)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(R(),Object(d.k)("memberId","==",N().uid),Object(d.k)("coalitionId","==",t)),e.next=3,Object(d.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(R(),Object(d.k)("coalitionId","==",t)),e.next=3,Object(d.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,"ShowUsers","true");case 2:if(e.t0=e.sent,!0!==e.t0){e.next=7;break}return e.next=6,T(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,"ShowUsers","true");case 2:if(!e.sent){e.next=7;break}return e.next=5,U(t);case 5:return n=e.sent,e.abrupt("return",n.length);case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:if(1!==(n=e.sent).length||!n[0].data()||n[0].data().memberId!==N().uid){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return n=e.sent,e.next=5,B(n.data().coalitionId);case 5:if(!(e.sent>1)){e.next=11;break}return e.next=9,Object(d.c)(E(n.id));case 9:e.next=12;break;case 11:throw new Error("Can not delete last member.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=v("invites"),F=H.getCurrentUser,W=H.getDocRef,V=H.getCollection,q=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={coalitionId:t,memberId:n},e.next=3,Object(d.a)(V(),r);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(V(),Object(d.k)("memberId","==",F().uid),Object(d.k)("coalitionId","==",t)),e.next=3,Object(d.f)(n);case 3:if(!(r=e.sent).empty){e.next=11;break}return e.next=7,q(t,F().uid);case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.abrupt("return",r.docs[0]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=W(t),e.next=3,Object(d.e)(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n=e.sent,r=n.data(),c=r.coalitionId,e.next=6,M(c);case 6:if(!e.sent){e.next=10;break}e.next=12;break;case 10:return e.next=12,P(c,F().uid);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(),r="/#/invite",e.next=4,J(t);case 4:return c=e.sent,a=c.id,u=n+r+("?id="+a),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=v("coalitions"),Q=G.getCurrentUser,_=G.getDocRef,$=G.getCollection,ee=G.deleteDocument,te=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={name:t,createdBy:Q().uid},e.next=4,Object(d.a)($(),n);case 4:return r=e.sent,console.log("Document written with ID: ",r.id),e.next=8,P(r.id,Q().uid);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.j)(_(t),n);case 2:return e.next=4,ue(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return t=e.sent,e.abrupt("return",ae(t,function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n=Object(d.i)($(),Object(d.k)("__name__","in",t)),e.next=5,Object(d.f)(n);case 5:return r=e.sent,e.abrupt("return",r.docs);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e,t){var n=0,r=e.length;return function(){if(-1===n)return[];var c=n+t,a=e.slice(n,c);return n=c<r?c:-1,a}},ae=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c,a,u,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=ce(t,10),a=0;case 3:if(!(a<10)){e.next=12;break}return u=c(),e.next=7,n(u);case 7:i=e.sent,r.push.apply(r,Object(p.a)(i));case 9:a++,e.next=3;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_(t),e.next=3,Object(d.e)(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if(!e.sent){e.next=9;break}return e.next=6,ue(t);case 6:return e.abrupt("return",e.sent);case 9:throw new Error("Coalition does not exist or user is not a member.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){return h()+"/#/coalition/"+e},oe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,r=(c=n)<4?c:c/2,e.abrupt("return",r);case 5:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n=e.sent,e.next=5,ue(n.data().coalitionId);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t);case 2:return r=e.sent,c=Object(l.a)(Object(l.a)({},r.data()),{},{charter:n}),e.next=6,ne(r.id,c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.id);case 2:if(!((n=e.sent)&&n.length>0)){e.next=10;break}if(!(r=n.filter((function(e){return"Public"===e.data().name})))||1!==r.length){e.next=10;break}if("true"!==r[0].data().value){e.next=9;break}return e.abrupt("return",t);case 9:case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)($());case 2:return t=e.sent,n=t.docs,r=[],e.next=7,Promise.all(n.map(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t);case 2:if(!e.sent){e.next=5;break}return r.push(t.id),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return c=n.filter((function(e){return r.indexOf(e.id)>-1})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=n(3),de=function(e){var t=e.coalition,n=t.data().name;return Object(pe.jsxs)("div",{className:"coalition-row",children:[Object(pe.jsx)("span",{children:n}),Object(pe.jsx)("span",{children:Object(pe.jsx)("a",{href:se(t.id),children:"Coalition Link"})})]})},Oe=(n(46),function(){var e=Object(r.useState)(),t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(pe.jsxs)("div",{children:[Object(pe.jsx)("h1",{children:"Browse"}),Object(pe.jsx)("p",{children:"Here, you can browse all the public coalitions."}),Object(pe.jsx)("p",{children:"Click the Coalition Link to navigate to the selected coalition."}),n&&n.map((function(e,t){return Object(pe.jsx)(de,{coalition:e},t)}))]})}),xe=Object(r.createContext)(),ve=function(e){var t=e.children,n=e.coalitionId,c=Object(r.useState)(),a=Object(f.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(!1),o=Object(f.a)(s,2),l=o[0],p=o[1],d=Object(r.useState)(),O=Object(f.a)(d,2),x=O[0],h=O[1],m=Object(r.useState)(!1),w=Object(f.a)(m,2),y=w[0],k=w[1],C=Object(r.useState)(),S=Object(f.a)(C,2),A=S[0],I=S[1],D=Object(r.useState)(),N=Object(f.a)(D,2),E=N[0],R=N[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie(n);case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),R(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(n);case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(r.useEffect)((function(){k((function(){if(A&&A.length>0)return"true"===A.filter((function(e){return"ShowUsers"===e.data().name}))[0].data().value}))}),[A]),Object(r.useEffect)((function(){if(n)return g(n,(function(e){return I(e)}))}),[n]);var P=l&&l.data().createdBy===v().getCurrentUser().uid,z=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(u));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[u]),void 0===x||void 0===l||void 0===A?Object(pe.jsx)("div",{children:"loading..."}):Object(pe.jsxs)(xe.Provider,{value:{coalition:l,isCreator:P,isOnlyUser:x,rules:A,showUsers:y},children:[t,Object(pe.jsx)("div",{children:E})]})},he=function(){var e=Object(r.useContext)(xe).coalition,t=Object(r.useState)("http://localhost:3000/"),n=Object(f.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,Z(e.id);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.id&&t()}),[e.id]),Object(pe.jsxs)("div",{children:[Object(pe.jsx)("div",{children:"Invite Link:"}),Object(pe.jsx)("input",{type:"button",value:"Copy Invite Link",onClick:function(){navigator.clipboard.writeText(c)}}),Object(pe.jsx)("div",{children:Object(pe.jsx)("textarea",{disabled:!0,value:c,className:"inviteLinkBox"})})]})},me=v("votes"),we=me.getCurrentUser,ye=me.getCollection,ke=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:if(!e.sent){e.next=6;break}e.next=9;break;case 6:return r={petitionId:t,userId:we().uid,selection:n},e.next=9,Object(d.a)(ye(),r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(ye(),Object(d.k)("petitionId","==",t),Object(d.k)("userId","==",we().uid)),e.next=3,Object(d.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(ye(),Object(d.k)("petitionId","==",t)),e.next=3,Object(d.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=v("petitions"),Ae=Se.getCurrentUser,Ie=Se.getById,De=Se.getCollection,Ne=Se.set,Ee=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:return c=e.sent,a=Object(l.a)({coalitionId:t,petitionType:n,userId:Ae().uid,votesNeeded:c,status:"new"},r),e.next=6,Object(d.a)(De(),a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Re=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(De(),Object(d.k)("coalitionId","==",t)),e.next=3,Object(d.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,u,i,s,o,b,f,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:if(n=e.sent,r=n.data(),c=r.petitionType,a=r.coalitionId,u=r.charterText,"1"!==c){e.next=9;break}return e.next=7,be(a,u);case 7:case 13:e.next=19;break;case 9:if("2"!==c){e.next=15;break}return i=n.data(),s=i.ruleName,o=i.value,e.next=13,S(a,s,o);case 15:if("3"!==c){e.next=19;break}return b=n.data(),f=b.ruleName,p=b.value,e.next=19,A(a,f,p);case 19:return e.next=21,Ne(t,Object(l.a)(Object(l.a)({},n.data()),{},{status:"complete"}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:return n=e.sent,r=n.data().votesNeeded,e.next=6,Ce(t);case 6:if(c=e.sent,!(c.filter((function(e){return"yes"===e.data().selection})).length>=r)){e.next=11;break}return e.next=11,Pe(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:return n=e.sent,r=n.data().votesNeeded,e.next=6,Ce(t);case 6:return c=e.sent,a=c.filter((function(e){return"yes"===e.data().selection})).length,u=c.filter((function(e){return"no"===e.data().selection})).length,e.abrupt("return",{votesNeeded:r,yesVotes:a,noVotes:u});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e){var t=e.field,n=e.onChangeFieldValue;return Object(pe.jsx)("div",{children:Object(pe.jsx)("input",{onChange:n,name:t.value,placeholder:t.text})})},Ue=[{value:0,text:"Text Petition",fields:[{value:"title",text:"Title"},{value:"body",text:"Body"}]},{value:1,text:"Update Charter",fields:[{value:"charterText",text:"Charter Text"}]},{value:2,text:"Rule Add",fields:[{value:"ruleName",text:"Rule Name"},{value:"value",text:"Rule Value"}]},{value:3,text:"Rule Change",fields:[{value:"ruleName",text:"Rule Name"},{value:"value",text:"Rule Value"}]}],Be=function(e){var t=e.petitionType,n=e.setPetitionDataParent,c=Object(r.useState)(),a=Object(f.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(f.a)(s,2),j=o[0],b=o[1];Object(r.useEffect)((function(){var e=Ue.filter((function(e){return e.value===parseInt(t)}));1===e.length&&i(e[0])}),[t]);var p=function(e){var t='{"'.concat(e.target.name,'": "').concat(e.target.value,'"}'),r=JSON.parse(t),c=Object(l.a)(Object(l.a)({},j),r);b(c),n(c)};return u?Object(pe.jsx)("div",{children:u.fields&&u.fields.map((function(e,t){return Object(pe.jsx)(Te,{field:e,onChangeFieldValue:p},t)}))}):Object(pe.jsx)("div",{})},Ye=function(){var e=Object(r.useContext)(xe).coalition,t=Object(r.useState)(""),n=Object(f.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)("0"),i=Object(f.a)(u,2),s=i[0],o=i[1],l=Object(r.useState)(),p=Object(f.a)(l,2),d=p[0],O=p[1],x=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Ee(e.id,s,d);case 3:a("Created Successfully");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(pe.jsxs)("form",{onSubmit:x,children:[Object(pe.jsx)("select",{onChange:function(e){o(e.target.value)},children:Ue.map((function(e,t){return Object(pe.jsx)("option",{value:e.value,children:e.text},t)}))}),Object(pe.jsx)(Be,{petitionType:s,setPetitionDataParent:function(e){O(e)}}),Object(pe.jsx)("div",{children:Object(pe.jsx)("input",{type:"submit",value:"submit petition"})}),Object(pe.jsx)("div",{children:c})]})},Xe=(n(47),function(e){var t=e.petitionId,n=Object(r.useState)(),c=Object(f.a)(n,2),a=c[0],u=c[1],i=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ke(t,"yes");case 3:return e.next=5,ze(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ke(t,"no");case 3:return e.next=5,ze(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ke(t,"sign");case 3:return e.next=5,ze(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:(n=e.sent)&&u(n.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(pe.jsxs)("div",{children:[Object(pe.jsx)("input",{type:"button",value:"yes",onClick:i}),Object(pe.jsx)("input",{type:"button",value:"no",onClick:s}),Object(pe.jsx)("input",{type:"button",value:"Sign",onClick:o}),"Selection: ",a&&a.selection]})}),He=function(e){var t=e.petition,n=e.showVote,c=Object(r.useState)(),a=Object(f.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(),o=Object(f.a)(s,2),l=o[0],p=o[1],d=Object(r.useState)(),O=Object(f.a)(d,2),x=O[0],v=O[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t.id);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.id]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(t.id);case 2:n=e.sent,p(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.id]),Object(r.useEffect)((function(){var e=Ue.filter((function(e){return e.value===parseInt(t.data().petitionType)}));1===e.length&&v(e[0])}),[t]);var h=t.data();return Object(pe.jsxs)("div",{className:"petition-block",children:["Status: ",h.status,Object(pe.jsx)("div",{children:x&&x.fields.map((function(e,t){var n=h[e.value];return Object(pe.jsxs)("div",{children:[e.text,": ",n]},t)}))}),n&&Object(pe.jsx)(Xe,{petitionId:t.id}),u&&Object(pe.jsxs)("div",{children:["Your vote: ",u.data().selection]}),l&&Object(pe.jsxs)("div",{children:["Outcome: Yes: ",l.yesVotes," No: ",l.noVotes," Needed: ",l.votesNeeded," Has Passed: ",l.yesVotes>=l.votesNeeded?"yes":"no"]})]})},Fe=function(e){var t=e.petitions,n=e.showVote;return Object(pe.jsx)("div",{children:t&&t.map((function(e,t){return Object(pe.jsx)(He,{petition:e,showVote:n},t)}))})},We=function(){var e=Object(r.useContext)(xe).coalition,t=Object(r.useState)(),n=Object(f.a)(t,2),c=n[0],a=n[1];Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Re(e.id);case 2:n=t.sent,a(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]);var u=function(){return c.filter((function(e){return"new"===e.data().status}))},i=function(){return c.filter((function(e){return"complete"===e.data().status}))};return c?Object(pe.jsxs)("div",{children:[u()&&u().length>0&&Object(pe.jsx)("h2",{children:"Open Petitions"}),Object(pe.jsx)(Fe,{petitions:u(),showVote:!0}),i()&&i().length>0&&Object(pe.jsx)("h2",{children:"Passed Petitions"}),Object(pe.jsx)(Fe,{petitions:i(),showVote:!1})]}):Object(pe.jsx)("div",{})},Ve=function(e){var t=e.coalitionId,n=Object(r.useState)(),c=Object(f.a)(n,2),a=c[0],u=c[1],i=Object(r.useState)(),s=Object(f.a)(i,2),o=s[0],l=s[1],p=Object(r.useState)(),d=Object(f.a)(p,2),O=d[0],x=d[1],v=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,S(t,a,o);case 3:x("complete");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsx)("div",{children:Object(pe.jsxs)("form",{onSubmit:v,children:["New Rule",Object(pe.jsx)("hr",{}),Object(pe.jsx)("input",{placeholder:"Rule Name",onChange:function(e){u(e.target.value)}}),Object(pe.jsx)("input",{placeholder:"Rule Value",onChange:function(e){l(e.target.value)}}),Object(pe.jsx)("input",{type:"submit"}),O]})})},qe=function(){var e=Object(r.useContext)(xe).coalition,t=Object(r.useState)(""),n=Object(f.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(""),i=Object(f.a)(u,2),s=i[0],o=i[1],l=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,S(e.id,c,s);case 3:a(""),o("");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(pe.jsxs)("tr",{className:"new-rule-row",children:[Object(pe.jsx)("td",{children:Object(pe.jsx)("input",{placeholder:"name",onChange:function(e){a(e.target.value)},value:c})}),Object(pe.jsx)("td",{children:Object(pe.jsx)("input",{placeholder:"value",onChange:function(e){o(e.target.value)},value:s})}),Object(pe.jsx)("td",{className:"new-rule-add",children:Object(pe.jsx)("input",{type:"submit",onClick:l,value:"Add"})})]})},Je=function(e){var t=e.r,n=Object(r.useContext)(xe).coalition,c=t.data(),a=c.value,u=c.name,i=Object(r.useState)(!1),s=Object(f.a)(i,2),o=s[0],l=s[1],p=Object(r.useState)(""),d=Object(f.a)(p,2),O=d[0],x=d[1],v=Object(r.useState)(a),h=Object(f.a)(v,2),m=h[0],w=h[1],y=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,A(n.id,u,m);case 3:x("Save Successful"),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsxs)("td",{className:"rule-value-col",onClick:function(e){l(!0)},onBlur:function(e){a===m&&l(!1)},children:[!o&&t.data().value,o&&Object(pe.jsxs)("form",{onSubmit:y,children:[Object(pe.jsx)("input",{value:m,onChange:function(e){w(e.target.value)}}),Object(pe.jsx)("input",{type:"submit",value:"update"}),Object(pe.jsx)("input",{type:"button",onClick:function(e){w(a),l(!1)},value:"cancel"})]}),Object(pe.jsx)("span",{className:"rule-edit-message",children:O})]})},Le=(n(48),function(){var e=Object(r.useContext)(xe),t=e.isOnlyUser,n=e.coalition,c=Object(r.useState)(),a=Object(f.a)(c,2),u=a[0],i=a[1];return Object(r.useEffect)((function(){return g(n.id,(function(e){return i(e)}))}),[n.id]),u&&0!==u.length?Object(pe.jsx)("div",{children:Object(pe.jsxs)("table",{className:"rule-table",children:[Object(pe.jsx)("thead",{children:Object(pe.jsxs)("tr",{children:[Object(pe.jsx)("th",{children:"name"}),Object(pe.jsx)("th",{children:"value"})]})}),Object(pe.jsxs)("tbody",{children:[u&&u.map((function(e,t){return Object(pe.jsxs)("tr",{children:[Object(pe.jsxs)("td",{className:"rule-name-col",children:[" ",e.data().name]}),Object(pe.jsx)(Je,{r:e})]},t)})),t&&Object(pe.jsx)(qe,{})]})]})}):Object(pe.jsxs)("div",{children:[Object(pe.jsx)("div",{children:"No rules yet..."}),Object(pe.jsxs)("div",{children:["   ",t&&Object(pe.jsx)(Ve,{coalitionId:n.id})]})]})}),Ke=v("users"),Ze=Ke.getCurrentUser,Ge=Ke.getCollection,Qe=Ke.set,_e=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:t,displayName:"",createdBy:Ze().uid},e.next=3,Object(d.a)(Ge(),n);case 3:return r=e.sent,e.next=6,Object(d.e)(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ze(),e.next=3,et(t.uid);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.i)(Ge(),Object(d.k)("userId","==",t)),e.next=3,Object(d.f)(n);case 3:if(!(r=e.sent).empty){e.next=8;break}return e.next=7,Object(d.e)(_e(t));case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",r.docs[0]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:if(!((n=e.sent)&&n.length>0)){e.next=8;break}return e.next=6,Promise.all(n.map(function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(t.data().memberId);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(e){var t=e.member,n=Object(r.useContext)(xe),c=Object(r.useState)(!1),a=Object(f.a)(c,2),u=a[0],i=a[1],s=t.displayName,o=t.pronouns;return Object(r.useEffect)((function(){if(n&&n.rules){var e=n.rules.filter((function(e){return"NamesVisible"===e.data().name})),t=1===e.length&&e[0];t&&"true"===t.data().value?i(!0):i(!1)}}),[n]),u?u?Object(pe.jsxs)("div",{children:[Object(pe.jsxs)("span",{children:[" ",s||"no display name"]}),Object(pe.jsxs)("span",{className:"member-pronouns",children:["(",o,")"]})]}):void 0:Object(pe.jsx)("div",{children:"anonymous pangolin"})},rt=(n(49),function(){var e=Object(r.useContext)(xe).coalition,t=Object(r.useState)(),n=Object(f.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(e.id);case 2:n=t.sent,a(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(pe.jsxs)("div",{children:[Object(pe.jsxs)("div",{children:["Member number: ",c&&c.length]}),c&&c.map((function(e,t){return e?Object(pe.jsx)("div",{children:Object(pe.jsx)(nt,{member:e.data()})},t):Object(pe.jsx)("div",{children:"No info"},t)}))]})}),ct=function(){var e=Object(r.useContext)(xe).isOnlyUser;return Object(pe.jsx)("div",{children:e&&Object(pe.jsx)("div",{children:"Only User Mode"})})},at=(n(35),function(e){var t=e.headerText,n=e.children,c=Object(r.useState)(),a=Object(f.a)(c,2),u=a[0],i=a[1];return Object(pe.jsxs)("div",{className:"expand-box",children:[Object(pe.jsx)("div",{className:"expand-box-header",onClick:function(e){i(!u)},children:t}),u&&Object(pe.jsx)("div",{className:"expand-box-children",children:n})]})}),ut=function(){var e=Object(r.useContext)(xe),t=e.isOnlyUser,n=e.coalition,c=Object(r.useState)(n.data().charter),a=Object(f.a)(c,2),u=a[0],i=a[1],s=Object(r.useState)(""),o=Object(f.a)(s,2),l=o[0],p=o[1],d=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,be(n.id,u);case 3:p("Updated");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsxs)("div",{children:[Object(pe.jsx)("div",{children:"Charter:"}),!t&&Object(pe.jsx)("textarea",{disabled:!t,value:u}),t&&Object(pe.jsxs)("form",{onSubmit:d,children:[Object(pe.jsx)("textarea",{onChange:function(e){i(e.target.value),p("")},value:u}),Object(pe.jsx)("br",{}),Object(pe.jsx)("input",{type:"submit"}),l]})]})},it=function(){var e=Object(r.useContext)(xe).coalition;return Object(pe.jsx)("a",{href:se(e.id),children:"Coalition Link"})},st=function(){var e=Object(r.useContext)(xe).coalition;return Object(pe.jsxs)("h2",{children:[" ",e.data().name]})},ot=function(){var e=Object(r.useContext)(xe),t=e.coalition,n=e.isCreator,c=Object(r.useState)(!1),a=Object(f.a)(c,2),u=a[0],i=a[1];return n?Object(pe.jsxs)("div",{children:["Creator things",Object(pe.jsx)("div",{children:Object(pe.jsx)("input",{type:"button",value:"Delete Coalition",onClick:function(e){e.preventDefault(),u?(ee(t.id),i(!1)):i(!0)}})}),Object(pe.jsx)("div",{children:u&&Object(pe.jsx)("div",{children:"Delete?"})})]}):Object(pe.jsx)("div",{})},jt=function(){var e=Object(r.useContext)(xe).coalition,t=Object(r.useState)(!1),n=Object(f.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(!1),i=Object(f.a)(u,2),o=i[0],l=i[1],p=Object(s.g)(),d=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c){t.next=5;break}a(!0),t.next=14;break;case 5:return t.prev=5,t.next=8,X(e.id);case 8:p("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),l(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(pe.jsxs)("div",{children:[Object(pe.jsx)("input",{type:"button",onClick:d,value:"Leave "+e.data().name}),c&&Object(pe.jsx)("div",{children:"click again to confirm"}),Object(pe.jsx)("div",{children:o})]})},bt=function(e){var t=e.coalitionId;return t?Object(pe.jsx)(ve,{coalitionId:t,children:Object(pe.jsxs)("div",{children:[Object(pe.jsx)(st,{}),Object(pe.jsx)(ct,{}),Object(pe.jsx)(it,{}),Object(pe.jsx)(at,{headerText:"Members",children:Object(pe.jsx)(rt,{})}),Object(pe.jsx)(at,{headerText:"Charter",children:Object(pe.jsx)(ut,{})}),Object(pe.jsx)(at,{headerText:"Rules",children:Object(pe.jsx)(Le,{})}),Object(pe.jsx)(at,{headerText:"Invite",children:Object(pe.jsx)(he,{})}),Object(pe.jsx)(at,{headerText:"New Petition",children:Object(pe.jsx)(Ye,{})}),Object(pe.jsx)(at,{headerText:"Petitions",children:Object(pe.jsx)(We,{})}),Object(pe.jsx)(jt,{}),Object(pe.jsx)(ot,{})]})}):Object(pe.jsx)("div",{})},ft=function(){var e=Object(s.h)(),t=Object(r.useState)(),n=Object(f.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(),i=Object(f.a)(u,2),o=i[0],l=i[1],p=Object(r.useState)(),d=Object(f.a)(p,2),O=d[0],x=d[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie(e.coalitionId);case 3:n=t.sent,a(n),l(e.coalitionId),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),x(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[e.coalitionId]),O?Object(pe.jsx)("div",{children:O}):c?Object(pe.jsx)(bt,{selectedCoalition:c,coalitionId:o}):Object(pe.jsx)("div",{children:"Loading..."})},lt=function(e){var t=e.isDirty,n=e.setIsDirty,c=e.setSelectedCoalition,a=e.setCoalitionId,u=Object(r.useState)(),i=Object(f.a)(u,2),s=i[0],o=i[1],l=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t&&l(),t&&n(!1),console.log("This is mounted or updated.")}),[t,n]),Object(pe.jsxs)("div",{children:["My coalitions",s&&s.map((function(e,t){return Object(pe.jsxs)("div",{children:[e.data().name,Object(pe.jsx)("input",{type:"button",value:"open",onClick:function(t){c(e),a(e.id)}})]},t)}))]})},pt=function(e){var t=e.setIsDirty,n=Object(r.useState)(),c=Object(f.a)(n,2),a=c[0],u=c[1],i=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,te(a);case 3:t(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(pe.jsxs)("div",{children:["Add New Coalition",Object(pe.jsxs)("form",{onSubmit:i,children:[Object(pe.jsx)("input",{onChange:function(e){u(e.target.value)},value:a}),Object(pe.jsx)("input",{type:"submit"})]})]})},dt=function(){var e=Object(r.useState)(!0),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),u=Object(f.a)(a,2),i=u[0],s=u[1],o=Object(r.useState)(),j=Object(f.a)(o,2),b=j[0],l=j[1];return Object(pe.jsxs)("div",{className:"widget-panel",children:[Object(pe.jsx)(lt,{isDirty:n,setIsDirty:c,setSelectedCoalition:s,setCoalitionId:l}),Object(pe.jsx)(pt,{setIsDirty:c}),i&&Object(pe.jsx)(bt,{selectedCoalition:i,coalitionId:b})]})},Ot=function(){var e=Object(i.c)(),t=Object(f.a)(e,1)[0],n=Object(s.g)(),c=Object(r.useState)(),a=Object(f.a)(c,2),u=a[0],o=a[1],l=Object(r.useState)(),p=Object(f.a)(l,2),d=p[0],O=p[1],x=Object(r.useState)(),v=Object(f.a)(x,2),h=v[0],m=v[1],w=Object(r.useState)(!1),y=Object(f.a)(w,2),k=y[0],g=y[1];console.log(t),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get("id"),m(n),e.next=4,je(n);case 4:return r=e.sent,e.next=7,z();case 7:e.sent.indexOf(r.id)>-1&&g(!0),o(r),O(r.data());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var C=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,K(h);case 3:n("/coalition/"+u.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d?k?Object(pe.jsxs)("div",{children:["You are a member of ",d.name," "]}):Object(pe.jsxs)("div",{children:[Object(pe.jsxs)("div",{children:["You've been invited to join ",d.name]}),Object(pe.jsxs)("div",{children:[Object(pe.jsx)("h2",{children:"Charter:"}),Object(pe.jsx)("p",{children:d.charter})]}),Object(pe.jsx)("input",{type:"button",onClick:C,value:"Accept"})]}):Object(pe.jsx)("div",{children:"Loading..."})},xt=function(){var e=Object(r.useState)(),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),u=Object(f.a)(a,2),i=u[0],s=u[1],o=Object(r.useState)(""),p=Object(f.a)(o,2),d=p[0],O=p[1],x=Object(r.useState)(""),v=Object(f.a)(x,2),h=v[0],m=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e();case 2:t=e.sent,c(t),n=t.data(),r=n.displayName,a=n.pronouns,s(r),m(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var w=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=Object(l.a)(Object(l.a)({},n.data()),{},{displayName:i,pronouns:h}),e.next=4,Qe(n.id,r);case 4:O("update successful");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(pe.jsxs)("div",{children:[Object(pe.jsxs)("form",{onSubmit:w,children:[Object(pe.jsx)("label",{children:"Display name"}),Object(pe.jsx)("input",{type:"text",value:i,onChange:function(e){s(e.target.value),O("")}}),Object(pe.jsxs)("div",{children:[Object(pe.jsx)("label",{children:"Pronouns"}),Object(pe.jsx)("input",{type:"text",value:h,onChange:function(e){e.preventDefault(),m(e.target.value),O("")}})]}),Object(pe.jsx)("input",{type:"submit",value:"Save"})]}),Object(pe.jsx)("div",{children:d})]}):Object(pe.jsx)("div",{children:"Loading..."})};var vt=function(){var e=Object(O.b)(),t=Object(r.useState)(),n=Object(f.a)(t,2),c=n[0],a=n[1];return Object(O.c)(e,(function(e){a(e||null)})),Object(pe.jsxs)("div",{children:[c&&Object(pe.jsx)("div",{children:c.email}),Object(pe.jsx)(i.b,{to:"/Account",children:"Account"}),Object(pe.jsx)("input",{type:"button",onClick:function(){Object(O.e)(e).then((function(){})).catch((function(e){}))},value:"Sign Out"})]})};var ht=function(){var e=Object(O.b)(),t=Object(r.useState)(""),n=Object(f.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(""),i=Object(f.a)(u,2),s=i[0],o=i[1],l=Object(r.useState)(),p=Object(f.a)(l,2),d=p[0],x=p[1],v=Object(r.useState)(),h=Object(f.a)(v,2),m=h[0],w=h[1],y=Object(r.useState)(!1),k=Object(f.a)(y,2),g=k[0],C=k[1];return Object(r.useEffect)((function(){return C(!0),function(){C(!1)}}),[]),Object(O.c)(e,(function(e){e?g&&x(e):g&&x(null)})),Object(pe.jsxs)("div",{children:[d&&Object(pe.jsx)("div",{children:d.email}),!d&&"no user",Object(pe.jsxs)("form",{children:[Object(pe.jsx)("input",{placeholder:"email",onChange:function(e){a(e.target.value)}}),Object(pe.jsx)("input",{type:"password",placeholder:"password",autoComplete:"on",onChange:function(e){o(e.target.value)}}),Object(pe.jsx)("input",{type:"button",onClick:function(){Object(O.d)(e,c,s).then((function(e){})).catch((function(e){var t=e.message;w(t)}))},value:"Sign In"}),Object(pe.jsx)("input",{type:"button",onClick:function(){Object(O.a)(e,c,s).then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t.user.uid);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.message;w(t)}))},value:"Create New User"})]}),Object(pe.jsx)("div",{children:m})]})};var mt=function(){var e=Object(O.b)(),t=Object(r.useState)(),n=Object(f.a)(t,2),c=n[0],a=n[1];return Object(O.c)(e,(function(e){a(e||null)})),Object(pe.jsxs)("div",{children:[c&&Object(pe.jsx)(vt,{}),!c&&Object(pe.jsx)(ht,{})]})},wt=function(e){var t=Object(O.b)(),n=Object(r.useState)(),c=Object(f.a)(n,2),a=c[0],u=c[1];return Object(O.c)(t,(function(e){u(e||null)})),Object(pe.jsxs)("div",{children:[Object(pe.jsx)("div",{children:Object(pe.jsx)(mt,{})}),Object(pe.jsx)("hr",{}),Object(pe.jsx)("div",{children:a&&e.children})]})},yt=n(37),kt={apiKey:window._env_&&window._env_.FIREBASE_API_KEY||"AIzaSyAfQe2YjUh4yxN6Ax0ooIIgvb9RHGDTTKw",authDomain:"coalition-ba367.firebaseapp.com",projectId:"coalition-ba367",storageBucket:"coalition-ba367.appspot.com",messagingSenderId:"1016116125256",appId:window._env_&&window._env_.FIREBASE_APP_ID||"1:1016116125256:web:21badede89212eb844027d"},gt=Object(yt.a)(kt),Ct=function(e){var t=e.children;return Object(pe.jsx)("div",{children:gt&&t})},St=function(){return Object(pe.jsx)("div",{className:"header-logo",children:Object(pe.jsx)(i.b,{to:"/",children:Object(pe.jsx)("img",{src:"data:image/png;base64,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",alt:"fireSpot"})})})},At=function(){return Object(pe.jsxs)("div",{className:"App",children:[Object(pe.jsxs)("header",{className:"App-header",children:[Object(pe.jsx)(St,{}),Object(pe.jsx)("span",{className:"browse-link",children:Object(pe.jsx)(i.b,{to:"/browse",children:"browse coalitions"})}),Object(pe.jsx)("span",{className:"code-link",children:Object(pe.jsx)("a",{href:"https://github.com/eyarham/coalition",children:"code"})})]}),Object(pe.jsx)(Ct,{children:Object(pe.jsx)(wt,{children:Object(pe.jsx)(s.a,{})})})]})},It=function(){return Object(pe.jsx)(s.d,{children:Object(pe.jsxs)(s.b,{path:"/",element:Object(pe.jsx)(At,{}),children:[Object(pe.jsx)(s.b,{path:"/",element:Object(pe.jsx)(dt,{})}),Object(pe.jsx)(s.b,{path:"/invite",element:Object(pe.jsx)(Ot,{})}),Object(pe.jsx)(s.b,{path:"/account",element:Object(pe.jsx)(xt,{})}),Object(pe.jsx)(s.b,{path:"/coalition/:coalitionId",element:Object(pe.jsx)(ft,{})}),Object(pe.jsx)(s.b,{path:"/browse",element:Object(pe.jsx)(Oe,{})})]})})};var Dt=function(){return Object(pe.jsx)(It,{})},Nt=(n(50),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))});u.a.render(Object(pe.jsx)(c.a.StrictMode,{children:Object(pe.jsx)(i.a,{children:Object(pe.jsx)(Dt,{})})}),document.getElementById("root")),Nt()}},[[51,1,2]]]);
//# sourceMappingURL=main.c0b94a97.chunk.js.map