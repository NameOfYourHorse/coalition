{"version":3,"sources":["_common/api.js","rules/api.js","_common/membershipApi.js","invite/api.js","coalition/api.js","browse/CoalitionEntry.js","browse/Browse.js","coalition/CoalitionContextProvider.js","invite/InviteLink.js","vote/api.js","petition/api.js","petition/PetitionField.js","petition/petitionTypes.js","petition/NewPetitionForm.js","petition/NewPetition.js","vote/Vote.js","petition/Petition.js","petition/PetitionList.js","petition/Petitions.js","rules/NewRule.js","rules/NewRuleRow.js","rules/RuleEditCell.js","rules/Rules.js","user/api.js","user/Member.js","user/Members.js","user/UserMode.js","_common/ExpandBox.js","coalition/Charter.js","coalition/CoalitionLink.js","coalition/CoalitionName.js","coalition/Delete.js","coalition/Leave.js","coalition/CoalitionWithContext.js","coalition/CoalitionPage.js","coalition/MyCoalitions.js","coalition/NewCoalition.js","coalition/CoalitionPanel.js","invite/Invite.js","user/Account.js","auth/LoggedIn.js","auth/LogInPanel.js","auth/AuthPanel.js","auth/AuthWrapper.js","firebase/FirebaseConfig.js","firebase/FirebaseApp.js","_common/HeaderLogo.js","__resources/Coalition.png","_common/Layout.js","_common/Router.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","getAuth","collection","doc","getDoc","getFirestore","setDoc","deleteDoc","api","collectionString","getCurrentUser","currentUser","getDocRef","id","db","getCollection","getById","a","docRef","createDoc","docToAdd","createdBy","uid","createdDate","Date","addDoc","set","data","deleteDocument","getByCoalitionId","coalitionId","q","query","where","getDocs","querySnapshot","docs","getByCoalitionIdSub","callback","onSnapshot","getOriginUrl","baseUrl","window","location","origin","getByCoalitionIdQuery","getByName","name","allByCoalition","filteredRules","filter","c","length","create","value","newRule","updateRule","ruleToUpdate","newData","checkRule","ruleToCheck","add","memberId","newMembership","getCoalitionIdsForCurrentUser","q2","membershipQuerySnapshot","coalitionIds","forEach","push","getAllByCoalitionIdInternal","getAllByCoalitionId","getMemberCount","allMembers","getIsOnlyUser","members","remove","membership","Error","newInvite","getByCoalition","empty","newDocRef","get","inviteId","invite","accept","addMembership","getLink","inviteUrl","inviteLink","write","newCoalition","console","log","addMember","error","setCoalition","tenAtATime","subCoalitionIds","q3","snapshot3","iterator","n","current","l","end","part","slice","getFunction","resultArray","next","i","subArray","results","coalition","getByIdForUser","getCoalitionLink","getVotesNeeded","memberCount","votesNeeded","x","getByInviteId","getInvite","inviteCoalition","updateCharter","charterText","openCoalition","coalitionToUpdate","charter","isCoalitionPublic","getRulesByCoalitionId","rules","publicRuleArray","r","getPublic","publicCoalitionIds","Promise","all","map","docsResult","d","indexOf","CoalitionEntry","className","href","Browse","useState","coalitions","setCoalitions","useEffect","effect","CoalitionContext","createContext","CoalitionContextProvider","children","selectedCoalition","setSelectedCoalition","setOpenCoalition","isOnlyUser","setIsOnlyUser","showUsers","setShowUsers","setRules","message","setMessage","setFromParams","isOnlyUserResult","rulesResult","isCreator","setActiveCoalition","setFromProps","undefined","Provider","InviteLink","useContext","setInviteLink","getInviteLink","type","onClick","navigator","clipboard","writeText","disabled","submitVote","petitionId","selection","getByPetitionIdForUser","newVote","userId","getByPetitionId","create2","petitionType","newPetition","status","executePetition","petition","ruleName","checkVotes","votes","v","getOutcome","yesVotes","noVotes","PetitionField","field","onChangeFieldValue","onChange","placeholder","text","petitionTypes","fields","NewPetitionForm","setPetitionDataParent","selectedPetitionType","setSelectedPetitionType","formValue","setFormValue","result","t","parseInt","e","newJsonValue","target","json","JSON","parse","newValue","f","NewPetition","setPetitionType","petitionData","setPetitionData","onPetitionSubmit","preventDefault","onSubmit","Vote","selectedVote","setSelectedVote","onVoteYes","onVoteNo","onSign","existingVote","Petition","showVote","setExistingVote","outcome","setOutcome","getExistingVote","getPetitionOutcome","response","dataValue","PetitionList","petitions","Petitions","setPetitions","getFunc","petitionsReturned","openPetitions","p","passedPetitions","NewRule","setRuleName","ruleValue","setRuleValue","onFormSubmit","NewRuleRow","setName","setValue","onRuleAddClick","RuleEditCell","isInEditMode","setIsInEditMode","cellValue","setCellValue","onBlur","Rules","coalitionContext","newUserData","displayName","user","memberships","m","memberUsers","Member","member","isVisible","setIsVisible","pronouns","visibleRuleArray","visibleRule","Members","setMembers","getData","users","UserMode","ExpandBox","headerText","isOpen","setIsOpen","Charter","setCharterText","onCharterSubmit","CoalitionLink","CoalitionName","Delete","deleteConfirm","setDeleteConfirm","Leave","showConfirm","setShowConfirm","errorMessage","setErrorMessage","navigate","useNavigate","onClickLeave","CoalitionWithContext","CoalitionPage","params","useParams","setCoalitionId","MyCoalitions","isDirty","setIsDirty","getCoalitionData","NewCoalition","newCoalitionName","setNewCoalitionName","addCoalition","CoalitionPanel","Invite","useSearchParams","searchParams","coalitionData","setCoalitionData","setInviteId","userIsMember","setUserIsMember","onAcceptClick","Account","selectedAccount","setSelectedAccount","updatedDisplayName","setDisplayName","setPronouns","effectFunc","account","onSubmitAccountSave","newAccount","LoggedIn","auth","loggedInUser","setLoggedInUser","onAuthStateChanged","email","to","signOut","then","catch","LoginPanel","setEmail","password","setPassword","loginErrorMessage","setLoginErrorMessage","isMounted","setIsMounted","autoComplete","signInWithEmailAndPassword","userCredential","createUserWithEmailAndPassword","AuthPanel","AuthWrapper","props","firebaseConfig","apiKey","_env_","FIREBASE_API_KEY","authDomain","projectId","storageBucket","messagingSenderId","appId","FIREBASE_APP_ID","app","initializeApp","FirebaseApp","HeaderLogo","src","alt","Layout","Router","path","element","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c0b94a97.chunk.js","sourcesContent":["import { getAuth } from \"firebase/auth\";\nimport { addDoc, collection, deleteDoc, doc, getDoc, getDocs, getFirestore, onSnapshot, query, setDoc, where } from \"firebase/firestore\";\n// Allows for better testing experience\nconst firebase = {\n  getAuth, collection, doc, getDoc, getFirestore, setDoc, deleteDoc\n}\n\nconst api = (collectionString) => {\n\n  const getCurrentUser = () => {\n    const auth = firebase.getAuth();\n    return auth.currentUser;\n  }\n  const getDocRef = (id) => {\n    const db = firebase.getFirestore();\n    return firebase.doc(db, collectionString, id);\n  }\n  const getCollection = () => {\n    const db = firebase.getFirestore();\n    return firebase.collection(db, collectionString);\n  }\n  const getById = async id => {\n    const docRef = getDocRef(id);\n    return await firebase.getDoc(docRef);\n  }\n\n  const createDoc = async doc => {\n    const docToAdd = {\n      createdBy: getCurrentUser().uid,\n      createdDate: new Date(),\n      ...doc\n    }\n    return await addDoc(getCollection(), docToAdd);\n  }\n\n  const set = async (id, data) => {\n    await firebase.setDoc(getDocRef(id), data);\n    return await getById(id);\n  }\n\n  const deleteDocument = async id => {\n    await firebase.deleteDoc(getDocRef(id));\n  }\n\n  const getByCoalitionId = async coalitionId => {\n    const q = query(getCollection(), where(\"coalitionId\", \"==\", coalitionId));\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs;\n  }\n\n  const getByCoalitionIdSub = (coalitionId, callback)=>{\n    const q = query(getCollection(), where(\"coalitionId\", \"==\", coalitionId));\n    const unsub = onSnapshot(q, (querySnapshot) => {\n      callback(querySnapshot.docs);\n    });\n    return unsub;\n  }\n  return { getCurrentUser, createDoc, getDocRef, getCollection, getById, set, deleteDocument, getByCoalitionId, getByCoalitionIdSub };\n}\nexport default api;\n\nconst getOriginUrl = () => {\n  const baseUrl = window.location.origin;\n  if (baseUrl === \"https://eyarham.github.io\") {\n    return baseUrl + \"/coalition\";\n  }\n  return baseUrl;\n}\nexport { getOriginUrl, firebase };\n\n","import api from \"../_common/api\";\n\nconst { getByCoalitionId, getByCoalitionIdQuery, createDoc, set, getByCoalitionIdSub } = api(\"rules\");\n\nconst getByName = async (coalitionId, name) => {\n  const allByCoalition = await getByCoalitionId(coalitionId);\n  const filteredRules = allByCoalition.filter(c => c.data().name === name);\n  if (filteredRules.length === 1)\n    return filteredRules[0];\n}\n\nconst create = async (coalitionId, name, value) => {\n  const newRule = {\n    coalitionId,\n    name,\n    value\n  }\n  await createDoc(newRule)\n}\nconst updateRule = async (coalitionId, name, value) => {\n  //get rule\n  const ruleToUpdate = await getByName(coalitionId, name);\n  //update values\n  const newData = { ...ruleToUpdate.data(), value };\n  //save rule\n  await set(ruleToUpdate.id, newData);\n}\n\nconst checkRule = async (coalitionId, name, value) => {\n  const ruleToCheck = await getByName(coalitionId, name);\n  if (ruleToCheck) {\n    return ruleToCheck.data().value === value;\n  }\n}\n\nexport { getByCoalitionId, create, updateRule, getByCoalitionIdQuery, getByCoalitionIdSub, checkRule };","import { addDoc, deleteDoc, getDocs, query, where } from \"firebase/firestore\";\nimport { checkRule } from \"../rules/api\";\nimport api from \"./api\";\nconst { getCurrentUser, getDocRef, getCollection } = api(\"memberships\");\nconst add = async (coalitionId, memberId) => {\n\n  var newMembership = {\n    coalitionId,\n    memberId\n  }\n  await addDoc(getCollection(), newMembership);\n}\n\nconst getCoalitionIdsForCurrentUser = async () => {\n  const q2 = query(getCollection(), where(\"memberId\", \"==\", getCurrentUser().uid));\n  const membershipQuerySnapshot = await getDocs(q2);\n  var coalitionIds = [];\n  membershipQuerySnapshot.forEach((doc) => {\n    coalitionIds.push(doc.data().coalitionId);\n  });\n  return coalitionIds;\n}\n\nconst getByCoalitionId = async (coalitionId) => {\n  const q2 = query(getCollection(), where(\"memberId\", \"==\", getCurrentUser().uid), where(\"coalitionId\", \"==\", coalitionId));\n  const membershipQuerySnapshot = await getDocs(q2);\n  return membershipQuerySnapshot.docs[0];\n}\n\nconst getAllByCoalitionIdInternal = async (coalitionId) => {\n  const q2 = query(getCollection(), where(\"coalitionId\", \"==\", coalitionId));\n  const membershipQuerySnapshot = await getDocs(q2);\n  return membershipQuerySnapshot.docs;\n}\nconst getAllByCoalitionId = async (coalitionId) => {\n  if (await checkRule(coalitionId, \"ShowUsers\", \"true\") === true) {\n    return await getAllByCoalitionIdInternal(coalitionId);\n  }\n}\n\nconst getMemberCount = async (coalitionId) => {\n  if (await checkRule(coalitionId, \"ShowUsers\", \"true\")) {\n    const allMembers = await getAllByCoalitionId(coalitionId);\n    return allMembers.length;\n  }\n  return -1;\n}\n\nconst getIsOnlyUser = async (coalitionId) => {\n  const members = await getAllByCoalitionIdInternal(coalitionId);\n  if (members.length === 1 && members[0].data() && members[0].data().memberId === getCurrentUser().uid) {\n    return true;\n  }\n  return false;\n}\n\nconst remove = async (coalitionId) => {\n  const membership = await getByCoalitionId(coalitionId);\n  var memberCount = await getMemberCount(membership.data().coalitionId)\n  if (memberCount > 1) {\n    await deleteDoc(getDocRef(membership.id));\n  }\n  else {\n    throw new Error(\"Can not delete last member.\");\n  }\n}\n\nexport { add, getCoalitionIdsForCurrentUser, remove, getAllByCoalitionId, getMemberCount, getByCoalitionId, getIsOnlyUser };\n\n","import { addDoc, getDoc, getDocs, query, where } from \"firebase/firestore\";\nimport api, { getOriginUrl } from \"../_common/api\";\nimport { add as addMembership, getByCoalitionId } from '../_common/membershipApi';\n\nconst { getCurrentUser, getDocRef, getCollection } = api(\"invites\");\nconst sendInvite = (inviteEmail) => {\n\n}\n\nconst create = async (coalitionId, memberId) => {\n  var newInvite = {\n    coalitionId,\n    memberId\n  };\n  const docRef = await addDoc(getCollection(), newInvite);\n  return docRef;\n}\n\nconst getByCoalition = async (coalitionId) => {\n  const q2 = query(getCollection(), where(\"memberId\", \"==\", getCurrentUser().uid), where(\"coalitionId\", \"==\", coalitionId));\n  const membershipQuerySnapshot = await getDocs(q2);\n  if (membershipQuerySnapshot.empty) {\n    const newDocRef = await create(coalitionId, getCurrentUser().uid);\n    return newDocRef;\n  }\n  else {\n    return membershipQuerySnapshot.docs[0];\n  }\n}\n\nconst get = async (inviteId) => {\n  const docRef = getDocRef(inviteId);\n  const invite = await getDoc(docRef);\n  return invite;\n\n}\n\nconst accept = async (inviteId) => {\n  const invite = await get(inviteId);\n  //check existing\n  const { coalitionId } = invite.data();\n  const existingMembership = await getByCoalitionId(coalitionId);\n  if (existingMembership) {\n//\n  }\n  else {\n    await addMembership(coalitionId, getCurrentUser().uid);\n  }\n}\n\nconst getLink = async (coalitionId) => {\n  const baseUrl = getOriginUrl();\n  const inviteUrl = \"/#/invite\";\n  const invite = await getByCoalition(coalitionId);\n  const inviteId = invite.id;\n  const query = \"?id=\" + inviteId;\n  const inviteLink = baseUrl + inviteUrl + query;\n  return inviteLink;\n}\n\nexport { sendInvite, get, create, accept, getByCoalition, getLink };\n\n","import { addDoc, getDoc, getDocs, query, setDoc, where } from \"firebase/firestore\";\nimport api, { getOriginUrl } from \"../_common/api\";\nimport { add as addMember, getByCoalitionId, getCoalitionIdsForCurrentUser, getMemberCount } from \"../_common/membershipApi\";\nimport { get as getInvite } from \"../invite/api\";\nimport { getByCoalitionId as getRulesByCoalitionId } from '../rules/api'\n\nconst { getCurrentUser, getDocRef, getCollection, deleteDocument } = api(\"coalitions\");\n\nconst write = async (name) => {\n  try {\n    var newCoalition = {\n      name,\n      createdBy: getCurrentUser().uid\n    }\n    const docRef = await addDoc(getCollection(), newCoalition);\n    console.log(\"Document written with ID: \", docRef.id);\n    await addMember(docRef.id, getCurrentUser().uid);\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n  }\n}\n\nconst setCoalition = async (id, data) => {\n  await setDoc(getDocRef(id), data);\n  return await getById(id);\n}\nconst get = async () => {\n  const coalitionIds = await getCoalitionIdsForCurrentUser();\n  return tenAtATime(coalitionIds, async (subCoalitionIds) => {\n    if (subCoalitionIds.length === 0) return [];\n    const q3 = query(getCollection(), where(\"__name__\", \"in\", subCoalitionIds));\n    const snapshot3 = await getDocs(q3);\n    return snapshot3.docs;\n  })\n\n}\nvar iterator = function (a, n) {\n  var current = 0,\n    l = a.length;\n  return function () {\n    if (current === -1) return [];\n    var end = current + n;\n    var part = a.slice(current, end);\n    current = end < l ? end : -1;\n    return part;\n  };\n};\nconst tenAtATime = async (coalitionIds, getFunction) => {\n  var resultArray = [];\n  var next = iterator(coalitionIds, 10);\n  for (var i = 0; i < 10; i++) {\n    var subArray = next();\n    var results = await getFunction(subArray);\n    resultArray.push(...results);\n  }\n  return resultArray;\n}\n\nconst getAll = async () => {\n  const querySnapshot = await getDocs(getCollection());\n  return querySnapshot.docs;\n}\n\nconst getById = async (id) => {\n  const docRef = getDocRef(id);\n  const coalition = await getDoc(docRef);\n  return coalition;\n}\n\nconst getByIdForUser = async (id) => {\n  const membership = await getByCoalitionId(id);\n  if (membership) {\n    return await getById(id);\n  }\n  else {\n    throw new Error(\"Coalition does not exist or user is not a member.\");\n  }\n}\n\nconst getCoalitionLink = (coalitionId) => {\n  const coalitionUrl = \"/#/coalition/\";\n  const link = getOriginUrl() + coalitionUrl + coalitionId;\n  return link;\n}\nconst getCoalitionRedirect = (coalitionId) => {\n  const coalitionUrl = \"/coalition/\";\n  const link = coalitionUrl + coalitionId;\n  return link;\n}\nconst votesNeededRule = x => {\n  if (x < 4) {\n    return x\n  }\n  else {\n    return x / 2;\n  }\n}\nconst getVotesNeeded = async (coalitionId) => {\n  //const coalition = await getById(coalitionId);\n  const memberCount = await getMemberCount(coalitionId);\n  const votesNeeded = votesNeededRule(memberCount);\n  return votesNeeded;\n}\n\nconst getByInviteId = async (inviteId) => {\n\n  var invite = await getInvite(inviteId);\n  var inviteCoalition = await getById(invite.data().coalitionId);\n  return inviteCoalition\n}\n\nconst updateCharter = async (coalitionId, charterText) => {\n  const openCoalition = await getByIdForUser(coalitionId);\n  const coalitionToUpdate = { ...openCoalition.data(), charter: charterText }\n  await setCoalition(openCoalition.id, coalitionToUpdate);\n}\n\nconst isCoalitionPublic = async (coalition) => {\n  const rules = await getRulesByCoalitionId(coalition.id);\n  if (rules && rules.length > 0) {\n    const publicRuleArray = rules.filter(r => r.data().name === \"Public\");\n    if (publicRuleArray && publicRuleArray.length === 1) {\n      const publicRule = publicRuleArray[0];\n      if (publicRule.data().value === \"true\") { return coalition };\n    }\n  }\n}\n\nconst getPublic = async () => {\n  const querySnapshot = await getDocs(getCollection());\n  const docs = querySnapshot.docs;\n  const publicCoalitionIds = [];\n  await Promise.all(docs.map(async (doc) => {\n    if (await isCoalitionPublic(doc)) {\n      publicCoalitionIds.push(doc.id);\n      return doc;\n    }\n  }));\n  const docsResult = docs.filter(d =>  publicCoalitionIds.indexOf(d.id) > -1);\n  return docsResult;\n}\n\nexport { write, get, getAll, getByIdForUser, setCoalition, getCoalitionLink, getCoalitionRedirect, getVotesNeeded, deleteDocument, getByInviteId, updateCharter, getPublic };\n\n","import React from 'react'\nimport { getCoalitionLink } from '../coalition/api';\n\nconst CoalitionEntry = ({ coalition }) => {\n  const { name } = coalition.data();\n  return (\n    <div className='coalition-row'>\n      <span>{name}</span>\n      <span><a href={getCoalitionLink(coalition.id)}>Coalition Link</a></span>\n    </div>\n  )\n}\n\nexport default CoalitionEntry","import React, { useEffect, useState } from 'react'\nimport { getPublic } from '../coalition/api';\nimport CoalitionEntry from './CoalitionEntry';\nimport './browse.css';\n\nconst Browse = () => {\n  const [coalitions, setCoalitions] = useState();\n  useEffect(() => {\n    var effect = async () => {\n      const coalitions = await getPublic();\n      setCoalitions(coalitions);\n    }\n    effect();\n  }, [])\n  return (\n    <div>\n      <h1>Browse</h1>\n      <p>\n        Here, you can browse all the public coalitions.\n      </p>\n      <p>\n        Click the Coalition Link to navigate to the selected coalition.\n      </p>\n      {\n        coalitions && coalitions.map((c, i) => <CoalitionEntry key={i} coalition={c} />)\n      }\n    </div>\n  )\n}\n\nexport default Browse","import React, { createContext, useEffect, useState } from 'react';\nimport { getByCoalitionIdSub } from '../rules/api';\nimport api from '../_common/api';\nimport { getIsOnlyUser } from '../_common/membershipApi';\nimport { getByIdForUser } from './api';\n\nconst CoalitionContext = createContext();\nconst CoalitionContextProvider = ({ children, coalitionId }) => {\n  const [selectedCoalition, setSelectedCoalition] = useState();\n  const [openCoalition, setOpenCoalition] = useState(false);\n  const [isOnlyUser, setIsOnlyUser] = useState();\n  const [showUsers, setShowUsers] = useState(false);\n  const [rules, setRules] = useState();\n  const [message, setMessage] = useState()\n  useEffect(() => {\n    const setFromParams = async () => {\n      try {\n        const coalition = await getByIdForUser(coalitionId);\n        setSelectedCoalition(coalition);\n      }\n      catch (e) {\n        setMessage(e.message);\n      }\n    }\n    setFromParams();\n  }, [coalitionId])\n  useEffect(() => {\n    const effect = async () => {\n      const isOnlyUserResult = await getIsOnlyUser(coalitionId);\n      setIsOnlyUser(isOnlyUserResult);\n    }\n    effect();\n  }, [coalitionId]);\n  useEffect(() => {\n    const isShowUsers = () => {\n      if (rules && rules.length > 0) {\n        const value = rules.filter(r => r.data().name === \"ShowUsers\")[0].data().value;\n        return value === \"true\";\n      }\n    }\n    setShowUsers(isShowUsers);\n  }, [rules])\n  useEffect(() => {\n    if (coalitionId)\n      return getByCoalitionIdSub(coalitionId, rulesResult => setRules(rulesResult));\n  }, [coalitionId])\n  const isCreator = openCoalition && openCoalition.data().createdBy === api().getCurrentUser().uid;\n  const setActiveCoalition = async (coalition) => {\n    setOpenCoalition(coalition);\n  }\n  useEffect(() => {\n    const setFromProps = async () => setActiveCoalition(selectedCoalition);\n    setFromProps();\n  }, [selectedCoalition]);\n  if (isOnlyUser === undefined\n    || openCoalition === undefined\n    || rules === undefined\n  ) {\n    return <div>loading...</div>\n  }\n  return (\n    <CoalitionContext.Provider value={{ coalition: openCoalition, isCreator, isOnlyUser, rules, showUsers }}>\n      {children}\n      <div>{message}</div>\n    </CoalitionContext.Provider>\n  )\n}\nexport { CoalitionContext };\nexport default CoalitionContextProvider;","import React, { useContext, useEffect, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { getLink } from './api';\n\nconst InviteLink = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const [inviteLink, setInviteLink] = useState(\"http://localhost:3000/\");\n  useEffect(() => {\n    const getInviteLink = async () => {\n      setInviteLink(await getLink(coalition.id));\n    }\n    if (coalition.id)\n      getInviteLink();\n  }, [coalition.id])\n  return (\n    <div>\n      <div>Invite Link:</div>\n      <input type=\"button\" value=\"Copy Invite Link\" onClick={() => { navigator.clipboard.writeText(inviteLink) }}></input>\n      <div>\n        <textarea disabled value={inviteLink} className='inviteLinkBox'></textarea>\n      </div>\n    </div>\n  )\n}\n\nexport default InviteLink\n","import { addDoc, getDocs, query, where } from \"firebase/firestore\";\nimport api from \"../_common/api\";\n\nconst { getCurrentUser, getCollection } = api(\"votes\");\n\nconst submitVote = async (petitionId, selection) => {\n  //check for existing vote\n\n  const existingVote = await getByPetitionIdForUser(petitionId);\n  if (existingVote) {\n    //update existing vote\n\n  }\n  else {\n    const newVote = {\n      petitionId,\n      userId: getCurrentUser().uid,\n      selection\n    }\n    await addDoc(getCollection(), newVote);\n  }\n}\n\nconst getByPetitionIdForUser = async (petitionId) => {\n  const q = query(getCollection(), where(\"petitionId\", \"==\", petitionId), where(\"userId\", \"==\", getCurrentUser().uid));\n  const membershipQuerySnapshot = await getDocs(q);\n  return membershipQuerySnapshot.docs[0];\n}\n\nconst getByPetitionId = async (petitionId) => {\n  const q = query(getCollection(), where(\"petitionId\", \"==\", petitionId));\n  const membershipQuerySnapshot = await getDocs(q);\n  return membershipQuerySnapshot.docs;\n}\n\nexport { submitVote, getByPetitionId, getByPetitionIdForUser };\n\n","import { addDoc, getDocs, query, where } from \"firebase/firestore\";\nimport { getVotesNeeded, updateCharter } from '../coalition/api';\nimport { create, updateRule } from \"../rules/api\";\nimport { getByPetitionId } from \"../vote/api\";\nimport api from \"../_common/api\";\n\nconst { getCurrentUser, getById, getCollection, set } = api(\"petitions\");\n\nconst create2 = async (coalitionId, petitionType, data) => {\n  const votesNeeded = await getVotesNeeded(coalitionId);\n  const newPetition = {\n    coalitionId,\n    petitionType,\n    userId: getCurrentUser().uid,\n    votesNeeded,\n    status: \"new\",\n    ...data\n  }\n  await addDoc(getCollection(), newPetition);\n\n}\n\nconst getByCoalitionId = async coalitionId => {\n  const q2 = query(getCollection(), where(\"coalitionId\", \"==\", coalitionId));\n  const membershipQuerySnapshot = await getDocs(q2);\n  return membershipQuerySnapshot.docs;\n}\n\nconst executePetition = async (petitionId) => {\n  const petition = await getById(petitionId);\n  const { petitionType, coalitionId, charterText } = petition.data();\n  if (petitionType === \"1\") {//Update Charter\n    await updateCharter(coalitionId, charterText);\n  }\n  else if (petitionType === \"2\") {//Rule Add\n    const { ruleName, value } = petition.data();\n    await create(coalitionId, ruleName, value);\n  }\n  else if (petitionType === \"3\") {//Rule Change\n    const { ruleName, value } = petition.data();\n    await updateRule(coalitionId, ruleName, value);\n  }\n  await set(petitionId, { ...petition.data(), status: \"complete\" });\n}\nconst checkVotes = async (petitionId) => {\n  const petition = await getById(petitionId);\n  const votesNeeded = petition.data().votesNeeded;\n  const votes = await getByPetitionId(petitionId);\n  const yesVotes = votes.filter(v => v.data().selection === \"yes\")\n  if (yesVotes.length >= votesNeeded) {\n    await executePetition(petitionId);\n  }\n}\n\nconst getOutcome = async (petitionId) => {\n  const petition = await getById(petitionId);\n  const votesNeeded = petition.data().votesNeeded;\n  const votes = await getByPetitionId(petitionId);\n  const yesVotes = votes.filter(v => v.data().selection === \"yes\").length;\n  const noVotes = votes.filter(v => v.data().selection === \"no\").length;\n\n  return { votesNeeded, yesVotes, noVotes }\n\n}\n\nconst updatePetition = async (petitionId) => {\n  const petition = getById(petitionId);\n  await set(petitionId, { ...petition });\n}\n\nexport { getByCoalitionId, checkVotes, create2, updatePetition, getOutcome };\n\n","import React from 'react'\n\nconst PetitionField = ({field,onChangeFieldValue}) => {\n  return (\n    <div>\n       <input onChange={onChangeFieldValue} name={field.value} placeholder={field.text}></input>\n    </div>\n  )\n}\n\nexport default PetitionField\n","const petitionTypes = [\n  {value: 0, text: \"Text Petition\", fields: [{value:\"title\", text: \"Title\"}, {value:\"body\", text: \"Body\"}] },\n  {value: 1, text: \"Update Charter\", fields: [{value: \"charterText\", text: \"Charter Text\"}] },\n   {value: 2, text: \"Rule Add\" , fields: [{value: \"ruleName\", text:\"Rule Name\"}, {value: \"value\", text: \"Rule Value\"}] },\n   {value: 3, text: \"Rule Change\", fields: [{value: \"ruleName\", text:\"Rule Name\"}, {value: \"value\", text: \"Rule Value\"}] },\n]\nexport default petitionTypes;","import React, { useEffect, useState } from 'react'\nimport PetitionField from './PetitionField';\nimport petitionTypes from './petitionTypes';\n\nconst NewPetitionForm = ({ petitionType, setPetitionDataParent }) => {\n  const [selectedPetitionType, setSelectedPetitionType] = useState();\n  const [formValue, setFormValue] = useState();\n\n  useEffect(() => {\n    const result = petitionTypes.filter(t => t.value === parseInt(petitionType))\n    if (result.length === 1) {\n      setSelectedPetitionType(result[0]);\n    }\n  }, [petitionType])\n  const onChangeFieldValue = e => {\n    const newJsonValue = `{\"${e.target.name}\": \"${e.target.value}\"}`\n    const json = JSON.parse(newJsonValue);\n    const newValue = { ...formValue, ...json };\n    setFormValue(newValue);\n    setPetitionDataParent(newValue);\n  }\n  if (!selectedPetitionType) return <div></div>;\n  return (\n    <div>\n      {selectedPetitionType.fields && selectedPetitionType.fields.map((f, i) =>\n        <PetitionField key={i} field={f} onChangeFieldValue={onChangeFieldValue} />\n      )}\n    </div>\n  )\n}\n\nexport default NewPetitionForm\n","import React, { useContext, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { create2 } from './api';\nimport NewPetitionForm from './NewPetitionForm';\nimport petitionTypes from './petitionTypes';\n\nconst NewPetition = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const [message, setMessage] = useState(\"\");\n  const [petitionType, setPetitionType] = useState(\"0\");\n  const [petitionData, setPetitionData] = useState();\n\n  const onPetitionSubmit = async e => {\n    e.preventDefault();\n    await create2(coalition.id, petitionType, petitionData);\n    setMessage(\"Created Successfully\");\n  }\n  const onPetitionTypeChange = e => {\n    setPetitionType(e.target.value);\n  }\n  const setPetitionDataParent = (data) => {\n    setPetitionData(data);\n  }\n  return (\n    <form onSubmit={onPetitionSubmit}>\n      <select onChange={onPetitionTypeChange}>\n        {petitionTypes.map((t, i) => <option key={i} value={t.value}>{t.text}</option>)}\n      </select>\n      <NewPetitionForm petitionType={petitionType} setPetitionDataParent={setPetitionDataParent} />\n      <div><input type=\"submit\" value=\"submit petition\"></input></div>\n      <div>{message}</div>\n    </form>\n  )\n}\n\nexport default NewPetition\n","import React, { useEffect, useState } from 'react';\nimport { checkVotes } from '../petition/api';\nimport { getByPetitionIdForUser, submitVote } from './api';\n\nconst Vote = ({ petitionId }) => {\n  const [selectedVote, setSelectedVote] = useState();\n  const onVoteYes = async e => {\n    e.preventDefault();\n    await submitVote(petitionId, \"yes\");\n    await checkVotes(petitionId);\n  }\n  const onVoteNo = async e => {\n    e.preventDefault();\n    await submitVote(petitionId, \"no\");\n    await checkVotes(petitionId);\n  }\n  const onSign = async e => {\n    \n    e.preventDefault();\n    await submitVote(petitionId, \"sign\");\n    await checkVotes(petitionId);\n  }\n  useEffect(() => {\n    const effect = async () => {\n      const existingVote = await getByPetitionIdForUser(petitionId);\n      if (existingVote) setSelectedVote(existingVote.data());\n    }\n    effect();\n  }, [petitionId])\n  return (\n    <div>\n      <input type=\"button\" value=\"yes\" onClick={onVoteYes}></input>\n      <input type=\"button\" value=\"no\" onClick={onVoteNo}></input>\n      <input type=\"button\" value=\"Sign\" onClick={onSign} ></input>\n      Selection: {selectedVote && selectedVote.selection}\n    </div>\n  )\n}\n\nexport default Vote\n","import React, { useEffect, useState } from 'react';\nimport { getByPetitionIdForUser } from '../vote/api';\nimport Vote from '../vote/Vote';\nimport { getOutcome } from './api';\nimport petitionTypes from './petitionTypes';\n\nconst Petition = ({ petition, showVote }) => {\n  const [existingVote, setExistingVote] = useState()\n  const [outcome, setOutcome] = useState()\n  const [selectedPetitionType, setSelectedPetitionType] = useState();\n  useEffect(() => {\n    const getExistingVote = async () => {\n      const result = await getByPetitionIdForUser(petition.id);\n      setExistingVote(result);\n    }\n    getExistingVote();\n  }, [petition.id]);\n  useEffect(() => {\n    const getPetitionOutcome = async () => {\n      const response = await getOutcome(petition.id);\n      setOutcome(response)\n    }\n    getPetitionOutcome();\n\n  }, [petition.id])\n\n  useEffect(() => {\n    const result = petitionTypes.filter(t => t.value === parseInt(petition.data().petitionType))\n    if (result.length === 1) {\n      setSelectedPetitionType(result[0]);\n    }\n  }, [petition])\n  const data = petition.data();\n  return (<div className='petition-block'>\n    Status: {data.status}\n    {(<div>\n      {selectedPetitionType && selectedPetitionType.fields.map((f, i) => {\n        const dataValue = data[f.value];\n        return (<div key={i}>{f.text}: {dataValue}</div>)\n      })}\n    </div>)}\n    {showVote && <Vote petitionId={petition.id} ></Vote>}\n\n    {existingVote && <div>Your vote: {existingVote.data().selection}</div>}\n    {outcome && <div>Outcome: Yes: {outcome.yesVotes} No: {outcome.noVotes} Needed: {outcome.votesNeeded} Has Passed: {(outcome.yesVotes >= outcome.votesNeeded) ? \"yes\" : \"no\"}</div>}\n  </div>)\n\n}\n\nexport default Petition\n","import React from 'react';\nimport Petition from './Petition';\n\nconst PetitionList = ({ petitions, showVote }) => {\n  return (\n    <div>\n      {petitions && (petitions.map((petition, i) => <Petition key={i} petition={petition} showVote={showVote} />))}\n    </div>\n  )\n}\n\nexport default PetitionList\n","import React, { useContext, useEffect, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { getByCoalitionId } from './api';\nimport './petition.css';\nimport PetitionList from './PetitionList';\n\nconst Petitions = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const [petitions, setPetitions] = useState()\n  useEffect(() => {\n    const getFunc = async () => {\n      const petitionsReturned = await getByCoalitionId(coalition.id);\n      setPetitions(petitionsReturned);\n    }\n    getFunc()\n  }, [coalition.id])\n\n  const openPetitions = () => {\n    return petitions.filter(p => p.data().status === \"new\");\n  }\n  const passedPetitions = () => {\n    return petitions.filter(p => p.data().status === \"complete\");\n  }\n  if (!petitions) return <div></div>;\n  return (\n    <div>\n      {openPetitions() && (openPetitions().length > 0) && <h2>Open Petitions</h2>}\n      {<PetitionList petitions={openPetitions()} showVote={true} />}\n      {passedPetitions() && (passedPetitions().length > 0) && <h2>Passed Petitions</h2>}\n      {<PetitionList petitions={passedPetitions()} showVote={false} />}\n    </div>\n  )\n}\n\nexport default Petitions","import React, { useState } from 'react';\nimport { create } from './api';\n\nconst NewRule = ({ coalitionId }) => {\n  const [ruleName, setRuleName] = useState();\n  const [ruleValue, setRuleValue] = useState();\n  const [message, setMessage] = useState();\n  const onFormSubmit = async (e) => {\n    e.preventDefault();\n    await create(coalitionId, ruleName, ruleValue);\n    setMessage(\"complete\");\n  }\n  const nameChange = e => {\n    setRuleName(e.target.value);\n  }\n  const valueChange = e => {\n    setRuleValue(e.target.value);\n  }\n  return <div>\n    <form onSubmit={onFormSubmit}>\n      New Rule\n      <hr />\n      <input placeholder='Rule Name' onChange={nameChange}></input>\n      <input placeholder='Rule Value' onChange={valueChange}></input>\n      <input type=\"submit\" />\n      {message}\n    </form>\n\n  </div>;\n};\n\nexport default NewRule;\n","import React, { useContext, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { create } from './api';\n\nconst NewRuleRow = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const [name, setName] = useState(\"\");\n  const [value, setValue] = useState(\"\");\n\n  const onRuleAddClick = async e => {\n    e.preventDefault();\n    await create(coalition.id, name, value);\n    setName(\"\");\n    setValue(\"\");\n  }\n  const onNameChange = e => {\n    setName(e.target.value);\n  }\n  const onValueChange = e => {\n    setValue(e.target.value);\n  }\n  return (<tr className='new-rule-row'>\n    <td><input placeholder='name' onChange={onNameChange} value={name}></input></td>\n    <td><input placeholder='value' onChange={onValueChange} value={value}></input></td>\n    <td className='new-rule-add'><input type=\"submit\" onClick={onRuleAddClick} value=\"Add\"></input></td>\n  </tr>);\n};\n\nexport default NewRuleRow;\n","import React, { useContext, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { updateRule } from './api';\n\nconst RuleEditCell = ({ r }) => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const { value, name } = r.data();\n  const [isInEditMode, setIsInEditMode] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [cellValue, setCellValue] = useState(value);\n  const onCellClick = e => {\n    setIsInEditMode(true);\n  }\n  const onCellValueChange = e => {\n    setCellValue(e.target.value);\n  }\n  const onFormSubmit = async e => {\n    e.preventDefault();\n    await updateRule(coalition.id, name, cellValue);\n    setMessage(\"Save Successful\");\n    setIsInEditMode(false);\n  }\n  const cancelEdit = e => {\n    setCellValue(value);\n    setIsInEditMode(false);\n  }\n  const onCellBlur = e => {\n    if (value === cellValue) {\n      setIsInEditMode(false);\n    }\n  }\n  return (\n    <td className='rule-value-col' onClick={onCellClick} onBlur={onCellBlur} >\n      {!isInEditMode && (r.data().value)}\n      {isInEditMode &&\n        <form onSubmit={onFormSubmit}>\n          <input value={cellValue} onChange={onCellValueChange}></input>\n          <input type=\"submit\" value=\"update\"></input>\n          <input type=\"button\" onClick={cancelEdit} value=\"cancel\" ></input>\n        </form>\n      }\n      <span className='rule-edit-message'>{message}</span>\n    </td>\n  )\n}\n\nexport default RuleEditCell","import React, { useContext, useEffect, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { getByCoalitionIdSub } from './api';\nimport NewRule from './NewRule';\nimport NewRuleRow from './NewRuleRow';\nimport RuleEditCell from './RuleEditCell';\nimport './rules.css';\n\nconst Rules = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { isOnlyUser, coalition } = coalitionContext;\n\n  const [rules, setRules] = useState();\n  useEffect(() => {\n    return getByCoalitionIdSub(coalition.id, docs => setRules(docs));\n  }, [coalition.id]);\n  if (!rules || rules.length === 0) {\n    return (\n      <div>\n        <div>No rules yet...</div>\n        <div>   {isOnlyUser && <NewRule coalitionId={coalition.id} />}</div>\n      </div>);\n  }\n  return (\n    <div>\n      <table className='rule-table'>\n        <thead>\n          <tr><th>name</th><th>value</th></tr></thead>\n        <tbody>\n          {rules && rules.map((r, i) =>\n            <tr key={i}>\n              <td className='rule-name-col'> {r.data().name}</td>\n              <RuleEditCell r={r} />\n            </tr>)}\n          {isOnlyUser && <NewRuleRow />}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default Rules\n","import { addDoc, getDoc, getDocs, query, where } from \"firebase/firestore\";\nimport api from \"../_common/api\";\nimport { getAllByCoalitionId } from \"../_common/membershipApi\";\n\nconst { getCurrentUser, getCollection, set } = api(\"users\");\n\nconst create = async (userId) => {\n  var newUserData = {\n    userId: userId,\n    displayName: '',\n    createdBy: getCurrentUser().uid\n  }\n  const docRef = await addDoc(getCollection(), newUserData);\n  return await getDoc(docRef);\n}\n\nconst get = async () => {\n  const user = getCurrentUser();\n  return await getById(user.uid);\n  // const q2 = query(getCollection(), where(\"userId\", \"==\", user.uid));\n  // const membershipQuerySnapshot = await getDocs(q2);\n  // if(membershipQuerySnapshot.empty) return await getDoc(create(user.uid));\n  // return membershipQuerySnapshot.docs[0];\n}\n\nconst getById = async (id) => {\n  const q2 = query(getCollection(), where(\"userId\", \"==\", id));\n  const membershipQuerySnapshot = await getDocs(q2);\n  if (membershipQuerySnapshot.empty) return await getDoc(create(id));\n  return membershipQuerySnapshot.docs[0];\n}\nconst getByCoalitionId = async (coalitionId) => {\n  const memberships = await getAllByCoalitionId(coalitionId);\n  if (memberships && memberships.length > 0) {\n    const memberUsers = await Promise.all(memberships.map(async (m, i) => {\n      const user = await getById(m.data().memberId);\n      return user;\n    }));\n    return memberUsers;\n  }\n}\n\nexport { create, get, set, getByCoalitionId };\n","import React, { useContext, useEffect, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\n\nconst Member = ({ member }) => {\n  const coalitionContext = useContext(CoalitionContext);\n  const [isVisible, setIsVisible] = useState(false);\n  const { displayName, pronouns } = member;\n  useEffect(() => {\n    if (coalitionContext && coalitionContext.rules) {\n      const visibleRuleArray = coalitionContext.rules.filter(r =>\n        r.data().name === \"NamesVisible\");\n      const visibleRule = visibleRuleArray.length === 1 && visibleRuleArray[0];\n      if (visibleRule && visibleRule.data().value === \"true\") {\n        setIsVisible(true);\n      }\n      else\n        setIsVisible(false);\n    }\n\n  }, [coalitionContext]);\n\n  if (!isVisible) {\n    return <div>anonymous pangolin</div>\n  }\n  if (isVisible) {\n    return (\n      <div>\n        <span> {displayName || \"no display name\"}</span>\n        <span className='member-pronouns'>({pronouns})</span>\n      </div>\n    )\n  }\n}\n\nexport default Member","import React, { useContext, useEffect, useState } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { getByCoalitionId } from './api';\nimport Member from './Member';\nimport \"./user.css\";\n\nconst Members = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const [members, setMembers] = useState();\n  useEffect(() => {\n    const getData = async () => {\n      const users = await getByCoalitionId(coalition.id);\n      setMembers(users);\n    }\n    getData();\n  }, [coalition.id])\n  return (\n    <div>\n      <div>Member number: {members && members.length}</div>\n      {members && members.map((m, i) => {\n        if (m) {\n          return (\n            <div key={i}>\n              <Member member={m.data()} />\n            </div>);\n        }\n        else return <div key={i}>No info</div>\n      })}\n    </div>\n  )\n}\n\nexport default Members\n","import React, { useContext } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\n\nconst UserMode = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { isOnlyUser } = coalitionContext;\n  return (\n    <div>\n      {isOnlyUser && <div>Only User Mode</div>}\n    </div>\n  )\n}\n\nexport default UserMode","import React, { useState } from 'react';\nimport './common.css';\n\nconst ExpandBox = ({ headerText, children }) => {\n  const [isOpen, setIsOpen] = useState();\n  const onHeaderClick = e => {\n    setIsOpen(!isOpen);\n  }\n  return (<div className='expand-box'>\n    <div className='expand-box-header' onClick={onHeaderClick}>{headerText}</div>\n    {isOpen && <div className='expand-box-children'>{children}</div>}\n  </div>);\n}\nexport default ExpandBox\n","\nimport React, { useContext, useState } from 'react';\nimport { updateCharter } from './api';\nimport { CoalitionContext } from './CoalitionContextProvider';\n\nconst Charter = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  //const [text, setText] = useState();\n  const { isOnlyUser, coalition } = coalitionContext;\n  const [charterText, setCharterText] = useState(coalition.data().charter);\n  const [message, setMessage] = useState(\"\");\n  // const charterText = coalition.data().charter;\n  const onCharterSubmit = async e => {\n    e.preventDefault();\n\n    await updateCharter(coalition.id, charterText);\n    setMessage(\"Updated\");\n  }\n  const onTextChange = e => {\n    setCharterText(e.target.value);\n    setMessage(\"\");\n  }\n  return (\n    <div>\n      <div>Charter:</div>\n      {!isOnlyUser &&\n        <textarea disabled={!isOnlyUser} value={charterText}></textarea>\n      }\n      {\n        isOnlyUser &&\n        <form onSubmit={onCharterSubmit}>\n          <textarea onChange={onTextChange} value={charterText}></textarea>\n          <br></br>\n          <input type=\"submit\"></input>\n          {message}\n        </form>\n      }\n    </div>\n  )\n}\n\nexport default Charter\n","import React, { useContext } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { getCoalitionLink } from './api';\n\nconst CoalitionLink = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  return (\n    <a href={getCoalitionLink(coalition.id)}>Coalition Link</a>\n  )\n}\n\nexport default CoalitionLink","import React, { useContext } from 'react';\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\n\nconst CoalitionName = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  return (\n    <h2> {coalition.data().name}</h2>\n  )\n}\n\nexport default CoalitionName","import React, { useContext, useState } from 'react';\nimport { deleteDocument } from './api';\nimport { CoalitionContext } from './CoalitionContextProvider';\n\nconst Delete = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition, isCreator } = coalitionContext;\n  const [deleteConfirm, setDeleteConfirm] = useState(false);\n\n  const onDeleteClick = e => {\n    e.preventDefault();\n    if (deleteConfirm) {\n      deleteDocument(coalition.id)\n      setDeleteConfirm(false);\n    }\n    else setDeleteConfirm(true);\n  }\n  if (!isCreator) return <div></div>;\n  return (\n    <div>Creator things\n      <div>\n        <input type=\"button\" value=\"Delete Coalition\" onClick={onDeleteClick}></input>\n      </div>\n      <div>{deleteConfirm && <div>Delete?</div>}</div>\n    </div>\n  )\n}\n\nexport default Delete\n","import React, { useContext, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { CoalitionContext } from '../coalition/CoalitionContextProvider';\nimport { remove } from '../_common/membershipApi';\n\n\nconst Leave = () => {\n  const coalitionContext = useContext(CoalitionContext);\n  const { coalition } = coalitionContext;\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(false);\n  const navigate = useNavigate();\n  const onClickLeave = async e => {\n    e.preventDefault();\n    if (!showConfirm) { setShowConfirm(true); }\n    else {\n      try {\n        await remove(coalition.id);\n        navigate(\"/\");\n      }\n      catch (e) {\n        setErrorMessage(e.message);\n      }\n    }\n  }\n  return (\n    <div>\n      <input type=\"button\" onClick={onClickLeave} value={\"Leave \" + coalition.data().name}></input>\n      {showConfirm && <div>click again to confirm</div>}\n      <div>\n        {errorMessage}\n      </div>\n    </div>\n  )\n}\n\nexport default Leave\n","import React from 'react';\nimport InviteLink from '../invite/InviteLink';\nimport NewPetition from '../petition/NewPetition';\nimport Petitions from '../petition/Petitions';\nimport Rules from '../rules/Rules';\nimport Members from '../user/Members';\nimport UserMode from '../user/UserMode';\nimport ExpandBox from '../_common/ExpandBox';\nimport Charter from './Charter';\nimport CoalitionContextProvider from './CoalitionContextProvider';\nimport CoalitionLink from './CoalitionLink';\nimport CoalitionName from './CoalitionName';\nimport Delete from './Delete';\nimport Leave from './Leave';\n\nconst CoalitionWithContext = ({ coalitionId }) => {\n  if (!coalitionId) return (<div></div>);\n  return (\n    <CoalitionContextProvider coalitionId={coalitionId}>\n      <div>\n        <CoalitionName />\n        <UserMode />\n        <CoalitionLink />\n        <ExpandBox headerText=\"Members\"><Members /></ExpandBox>\n        <ExpandBox headerText=\"Charter\"><Charter /></ExpandBox>\n        <ExpandBox headerText=\"Rules\"><Rules /></ExpandBox>\n        <ExpandBox headerText=\"Invite\"><InviteLink /></ExpandBox>\n        <ExpandBox headerText=\"New Petition\"><NewPetition /></ExpandBox>\n        <ExpandBox headerText=\"Petitions\"><Petitions /></ExpandBox>\n        <Leave />\n        <Delete />\n      </div>\n    </CoalitionContextProvider>\n  )\n}\n\nexport default CoalitionWithContext;\n","import React, { useEffect, useState } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport { getByIdForUser } from './api';\nimport CoalitionWithContext from './CoalitionWithContext';\n\nconst CoalitionPage = () => {\n  let params = useParams();\n  const [selectedCoalition, setSelectedCoalition] = useState();\n  const [coalitionId, setCoalitionId] = useState();\n\n  const [message, setMessage] = useState()\n  useEffect(() => {\n    const setFromParams = async () => {\n      try {\n        const coalition = await getByIdForUser(params.coalitionId);\n        setSelectedCoalition(coalition);\n        //validate coalitionId\n        setCoalitionId(params.coalitionId);\n      }\n      catch (e) {\n        setMessage(e.message);\n      }\n    }\n    setFromParams();\n  }, [params.coalitionId])\n  if (message) return <div>{message}</div>;\n  if (!selectedCoalition) return <div>Loading...</div>;\n  return (\n    <CoalitionWithContext selectedCoalition={selectedCoalition} coalitionId={coalitionId} />\n  )\n}\n\nexport default CoalitionPage\n","import React, { useEffect, useState } from 'react';\nimport { get } from './api';\n\nconst MyCoalitions = ({ isDirty, setIsDirty, setSelectedCoalition, setCoalitionId }) => {\n  const [coalitions, setCoalitions] = useState();\n  const getCoalitionData = async () => {\n    const coalitions = await get();\n    setCoalitions(coalitions);\n  }\n  // Merge of componentDidMount and componentDidUpdate\n  useEffect(() => {\n    isDirty && getCoalitionData();\n    isDirty && setIsDirty(false);\n    console.log(\"This is mounted or updated.\");\n  }, [isDirty, setIsDirty]);\n\n  return (\n    <div>\n      My coalitions\n      {coalitions && coalitions.map((coalition, i) => {\n        const onSelectCoalition = (e) => {\n          setSelectedCoalition(coalition);\n          setCoalitionId(coalition.id);\n        }\n        return (\n          <div key={i}>\n            {coalition.data().name}\n            <input type=\"button\" value=\"open\" onClick={onSelectCoalition}></input>\n          </div>)\n      })}\n    </div>\n  )\n}\n\nexport default MyCoalitions\n","import React, { useState } from 'react';\nimport { write } from './api';\n\nconst NewCoalition = ({ setIsDirty }) => {\n  const [newCoalitionName, setNewCoalitionName] = useState();\n  const addCoalition = async (e) => {\n    e.preventDefault();\n    await write(newCoalitionName);\n    setIsDirty(true);\n  }\n  const newCoalitionNameChange = (e) => {\n    setNewCoalitionName(e.target.value);\n  }\n  return (\n    <div>\n      Add New Coalition\n      <form onSubmit={addCoalition}>\n        <input onChange={newCoalitionNameChange} value={newCoalitionName}></input>\n        <input type=\"submit\" />\n      </form>\n    </div>\n  )\n}\n\nexport default NewCoalition\n","import React, { useState } from 'react';\nimport CoalitionWithContext from './CoalitionWithContext';\nimport MyCoalitions from './MyCoalitions';\nimport NewCoalition from './NewCoalition';\n\nconst CoalitionPanel = () => {\n  const [isDirty, setIsDirty] = useState(true);\n  const [selectedCoalition, setSelectedCoalition] = useState();\n  const [coalitionId, setCoalitionId] = useState();\n\n  return (\n    <div className='widget-panel'>\n      <MyCoalitions isDirty={isDirty} setIsDirty={setIsDirty} setSelectedCoalition={setSelectedCoalition} setCoalitionId={setCoalitionId} />\n      <NewCoalition setIsDirty={setIsDirty} />\n      {selectedCoalition && <CoalitionWithContext selectedCoalition={selectedCoalition} coalitionId={coalitionId} />}\n    </div>\n  )\n}\n\nexport default CoalitionPanel\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { getByInviteId, getCoalitionRedirect } from '../coalition/api';\nimport { getCoalitionIdsForCurrentUser } from '../_common/membershipApi';\nimport { accept } from './api';\n\nconst Invite = () => {\n  let [searchParams] = useSearchParams();\n  let navigate = useNavigate();\n  const [coalition, setCoalition] = useState();\n  const [coalitionData, setCoalitionData] = useState();\n  const [inviteId, setInviteId] = useState();\n  const [userIsMember, setUserIsMember] = useState(false);\n  console.log(searchParams);\n\n  useEffect(() => {\n    const getData = async () => {\n      let inviteId = searchParams.get(\"id\");\n      setInviteId(inviteId);\n      var inviteCoalition = await getByInviteId(inviteId);\n      //check membership\n      var userCoalitionIds = await getCoalitionIdsForCurrentUser();\n      if (userCoalitionIds.indexOf(inviteCoalition.id) > -1) {\n        setUserIsMember(true)\n      }\n      setCoalition(inviteCoalition);\n      setCoalitionData(inviteCoalition.data());\n    }\n    getData();\n  }, [searchParams])\n  const onAcceptClick = async e => {\n    e.preventDefault();\n    await accept(inviteId);\n    navigate(getCoalitionRedirect(coalition.id));\n  }\n\n  if (!coalitionData) return <div>Loading...</div>\n  if (userIsMember) return <div>You are a member of {coalitionData.name} </div>\n  return (\n    <div>\n      <div>\n        You've been invited to join {coalitionData.name}\n      </div>\n      <div>\n        <h2>Charter:</h2>\n        <p>{coalitionData.charter}</p>\n\n      </div>\n      <input type=\"button\" onClick={onAcceptClick} value=\"Accept\"></input>\n    </div>\n  )\n}\n\nexport default Invite\n","import React, { useEffect, useState } from 'react';\nimport { get, set } from './api';\n\n\nconst Account = () => {\n  const [selectedAccount, setSelectedAccount] = useState();\n  const [updatedDisplayName, setDisplayName] = useState('');\n  const [message, setMessage] = useState('');\n  const [pronouns, setPronouns] = useState('');\n  useEffect(() => {\n    const effectFunc = async () => {\n      const account = await get();\n      setSelectedAccount(account);\n\n      const { displayName, pronouns } = account.data();\n      setDisplayName(displayName);\n      setPronouns(pronouns);\n    }\n    effectFunc();\n  }, [])\n  const onChageDisplayName = e => {\n    setDisplayName(e.target.value);\n    setMessage(\"\");\n  }\n  const onChagePronouns = e => {\n    e.preventDefault();\n    setPronouns(e.target.value);\n    setMessage(\"\");\n  }\n  const onSubmitAccountSave = async e => {\n    e.preventDefault();\n    const newAccount = {\n      ...selectedAccount.data(),\n      displayName: updatedDisplayName,\n      pronouns\n    }\n    await set(selectedAccount.id, newAccount);\n    setMessage(\"update successful\");\n  }\n  if (!selectedAccount) return <div>Loading...</div>;\n  return (\n    <div>\n      <form onSubmit={onSubmitAccountSave}>\n        <label>Display name</label>\n        <input type=\"text\" value={updatedDisplayName} onChange={onChageDisplayName}></input>\n        <div>\n          <label>Pronouns</label>\n          <input type=\"text\" value={pronouns} onChange={onChagePronouns}></input>\n        </div>\n        <input type=\"submit\" value=\"Save\"></input>\n      </form>\n      <div>{message}</div>\n    </div>\n  )\n}\n\nexport default Account;\n","import { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\";\nimport React, { useState } from 'react';\nimport { Link } from \"react-router-dom\";\n\nfunction LoggedIn() {\n  const auth = getAuth();\n  const [loggedInUser, setLoggedInUser] = useState();\n  onAuthStateChanged(auth, (user) => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      // https://firebase.google.com/docs/reference/js/firebase.User\n      //const uid = user.uid;\n      setLoggedInUser(user);\n      // ...\n    } else {\n      // User is signed out\n      // ...\n      setLoggedInUser(null);\n    }\n  });\n  const signOutEvent = () => {\n    signOut(auth).then(() => {\n      // Sign-out successful.\n    }).catch((error) => {\n      // An error happened.\n    });\n  }\n\n  return (\n    <div>\n      {loggedInUser &&\n        <div>{loggedInUser.email}</div>\n      }\n      <Link to=\"/Account\" >Account</Link>\n      <input type=\"button\" onClick={signOutEvent} value=\"Sign Out\"></input>\n    </div>\n  )\n}\n\nexport default LoggedIn\n","import { createUserWithEmailAndPassword, getAuth, onAuthStateChanged, signInWithEmailAndPassword } from \"firebase/auth\";\nimport React, { useState, useEffect } from 'react';\nimport { create } from \"../user/api\";\n\nfunction LoginPanel() {\n  const auth = getAuth();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loggedInUser, setLoggedInUser] = useState();\n  const [loginErrorMessage, setLoginErrorMessage] = useState();\n  const [isMounted, setIsMounted] = useState(false);\n  useEffect(() => {\n    setIsMounted( true);               // note mutable flag\n    // someAsyncOperation().then(data => {\n    //   if (isMounted) setState(data);    // add conditional check\n    // })\n    return () => { setIsMounted(false) }; // cleanup toggles value, if unmounted\n  }, []);  \n  onAuthStateChanged(auth, (user) => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      // https://firebase.google.com/docs/reference/js/firebase.User\n      //const uid = user.uid;\n      if (isMounted)  setLoggedInUser(user);\n      // ...\n    } else {\n      // User is signed out\n      // ...\n      if (isMounted)  setLoggedInUser(null);\n    }\n  });\n  const createAccount = () => {\n    createUserWithEmailAndPassword(auth, email, password)\n      .then(async (userCredential) => {\n        // Signed in \n        // const user = userCredential.user;\n        // ...\n        await create(userCredential.user.uid)\n      })\n      .catch((error) => {\n        //const errorCode = error.code;\n        const errorMessage = error.message;\n        setLoginErrorMessage(errorMessage);\n        // ..\n      });\n\n  }\n  const signIn = () => {\n    signInWithEmailAndPassword(auth, email, password)\n      .then((userCredential) => {\n        // Signed in \n        //const user = userCredential.user;\n        // ...\n      })\n      .catch((error) => {\n        //const errorCode = error.code;\n        const errorMessage = error.message;\n        setLoginErrorMessage(errorMessage);\n      });\n\n  }\n  const changeEmail = (e) => {\n    setEmail(e.target.value);\n  }\n  const changePassword = (e) => {\n    setPassword(e.target.value);\n  }\n  return (\n    <div>\n      {loggedInUser &&\n        <div>{loggedInUser.email}</div>\n      }\n      {(!loggedInUser) && \"no user\"}\n      <form>\n        <input placeholder=\"email\" onChange={changeEmail}></input>\n        <input type=\"password\" placeholder=\"password\" autoComplete=\"on\" onChange={changePassword}></input>\n        <input type=\"button\" onClick={signIn} value=\"Sign In\"></input>\n        <input type=\"button\" onClick={createAccount} value=\"Create New User\"></input>\n      </form>\n      <div>{loginErrorMessage}</div>\n    </div>\n  )\n}\n\nexport default LoginPanel\n","import { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport React, { useState } from 'react';\nimport LoggedIn from './LoggedIn';\nimport LoginPanel from './LogInPanel';\n\nfunction AuthPanel() {\nconst auth = getAuth();\n  const [loggedInUser, setLoggedInUser] = useState();\n  onAuthStateChanged(auth, (user) => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      // https://firebase.google.com/docs/reference/js/firebase.User\n      //const uid = user.uid;\n      setLoggedInUser(user);\n      // ...\n    } else {\n      // User is signed out\n      // ...\n      setLoggedInUser(null);\n    }\n  });\n\n  return (\n    <div>\n      {loggedInUser &&\n        <LoggedIn />\n      }\n      {(!loggedInUser) &&\n        <LoginPanel />\n      }\n    </div>\n  )\n}\n\nexport default AuthPanel\n","import { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport React, { useState } from 'react';\nimport AuthPanel from './AuthPanel';\n\nconst AuthWrapper = (props) => {\n  const auth = getAuth();\n  const [loggedInUser, setLoggedInUser] = useState();\n  onAuthStateChanged(auth, (user) => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      // https://firebase.google.com/docs/reference/js/firebase.User\n      //const uid = user.uid;\n      setLoggedInUser(user);\n      // ...\n    } else {\n      // User is signed out\n      // ...\n      setLoggedInUser(null);\n    }\n  });\n  return (\n    <div>\n      <div>\n        <AuthPanel />\n      </div>\n      <hr />\n      <div>\n        {loggedInUser && props.children}\n      </div>\n    </div>\n  )\n}\n\nexport default AuthWrapper\n","const defaultApiKey = \"AIzaSyAfQe2YjUh4yxN6Ax0ooIIgvb9RHGDTTKw\";\nconst defaultAppId = \"1:1016116125256:web:21badede89212eb844027d\";\nconst apiKey = ( window._env_ && window._env_.FIREBASE_API_KEY) || defaultApiKey;\nconst appId = ( window._env_ && window._env_.FIREBASE_APP_ID) || defaultAppId;\nconst firebaseConfig = {\n  apiKey,\n  authDomain: \"coalition-ba367.firebaseapp.com\",\n  projectId: \"coalition-ba367\",\n  storageBucket: \"coalition-ba367.appspot.com\",\n  messagingSenderId: \"1016116125256\",\n  appId\n};\n\nexport default firebaseConfig;","import { initializeApp } from \"firebase/app\";\nimport React from 'react';\nimport firebaseConfig from './FirebaseConfig';\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\nconst FirebaseApp = ({ children }) => {\n\n\n  return (\n    <div>\n      {app && children}\n    </div>\n  )\n}\n\nexport default FirebaseApp\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport mainLogo from '../__resources/Coalition.png';\nimport './common.css';\n\nconst HeaderLogo = () => {\n  return (\n    <div className='header-logo'>\n      <Link  to=\"/\"><img src={mainLogo} alt=\"fireSpot\"/></Link>\n    </div>\n  )\n}\n\nexport default HeaderLogo","export default \"data:image/png;base64,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\"","import React from 'react';\nimport { Link, Outlet } from \"react-router-dom\";\nimport AuthWrapper from '../auth/AuthWrapper';\nimport FirebaseApp from '../firebase/FirebaseApp';\nimport HeaderLogo from './HeaderLogo';\n\nconst Layout = () => {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <HeaderLogo />\n        <span className=\"browse-link\"><Link to=\"/browse\">browse coalitions</Link></span>\n        <span className=\"code-link\"><a href=\"https://github.com/eyarham/coalition\">code</a></span>\n      </header>\n      <FirebaseApp>\n        <AuthWrapper>\n          <Outlet />\n        </AuthWrapper>\n      </FirebaseApp>\n    </div>\n  )\n}\n\nexport default Layout\n","import React from 'react';\nimport { Route, Routes } from \"react-router-dom\";\nimport Browse from '../browse/Browse';\nimport CoalitionPage from '../coalition/CoalitionPage';\nimport CoalitionPanel from '../coalition/CoalitionPanel';\nimport Invite from '../invite/Invite';\nimport Account from '../user/Account';\nimport Layout from './Layout';\n\nconst Router = () => {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<Layout />}>\n        <Route path=\"/\" element={<CoalitionPanel />} />\n        <Route path=\"/invite\" element={<Invite />} />\n        <Route path=\"/account\" element={<Account />} />\n        <Route path=\"/coalition/:coalitionId\" element={<CoalitionPage />} />\n        <Route path=\"/browse\" element={<Browse />} />\n      </Route>\n    </Routes>\n  )\n}\n\nexport default Router\n","import './App.css';\nimport Router from './_common/Router';\n\nfunction App() {\n  return (\n    <Router />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\nimport App from './App';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter >\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}